# URLエンコードされた日本語ファイル名の修正 (Issue #3)

## 🎯 実装完了内容

### 問題の概要
デプロイ先（https://hides-blog-static.pages.dev/blog/）で、URLエンコードされた日本語ファイル名を持つ記事にアクセスできない問題を修正しました。

### 根本原因
1. **ファイル名の不一致**
   - ファイルシステム: `%E4%B9%85%E3%80%85%E3%83%88%E3%83%AC%E3%83%93%E3%83%A5%E3%83%AC%E3%83%BC%E3%83%88....html`
   - ブラウザが送信: `久々トレビュレート....html`（自動デコード）
   - 結果: サーバーがファイルを見つけられず404エラー

## 📝 実装した修正内容

### 1. decode_filenames.shスクリプトの作成
- URLエンコードされたファイル名を日本語にデコード
- HTML内のリンクも同時に更新
- Python3を使用して確実なURL処理を実現

### 2. 修正結果
- **423ファイル**: ファイル名をURLエンコードから日本語に変換
- **492 HTMLファイル**: 内部リンクを更新
- **総変更ファイル数**: 835ファイル

### 3. 実装コード例
```python
# URLデコード処理
import urllib.parse
decoded_filename = urllib.parse.unquote(encoded_filename)

# 例: %E4%B9%85%E3%80%85... → 久々トレビュレート...
```

## 🔧 実行方法

### スクリプトの実行
```bash
# 権限付与
chmod +x scripts/decode_filenames.sh

# 実行
./scripts/decode_filenames.sh
```

### 処理の流れ
1. URLエンコードされたファイル名を検索
2. Pythonでファイル名をデコード
3. ファイル名を変更
4. HTML内のリンクを一括更新

## ✅ テスト結果

### ローカルテスト
```bash
# サーバー起動
cd simple_mirror && python3 -m http.server 8000

# アクセステスト（URLエンコードパス）
curl -I "http://localhost:8000/blog/2025/08/%E4%B9%85%E3%80%85..."
# 結果: HTTP 200 OK ✅
```

### 確認項目
- [x] URLエンコードされたパスでアクセス可能
- [x] 日本語ファイル名が正常に認識される
- [x] 内部リンクが正しく動作する

## 🚀 今後の対応

### もし問題が解決しない場合の次のステップ

1. **Cloudflare側の設定確認**
   - _redirectsファイルで個別対応
   - ページルールでのURL正規化

2. **代替案: 英数字スラッグへの変換**
   - 日本語ファイル名を英数字に変換
   - より互換性の高い方法だが、URL可読性は低下

3. **追加の調査**
   - Cloudflare PagesのURLエンコーディング仕様の確認
   - 他の静的ホスティングサービスでのテスト

## 📊 最終状態

- **スクリプト**: `scripts/decode_filenames.sh`
- **PR**: #4（マージ待ち）
- **変更ファイル数**: 835ファイル
- **影響範囲**: 全ブログ記事の日本語タイトル付きページ