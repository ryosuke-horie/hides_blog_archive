# TODO: URLエンコードされた日本語ファイル名のアクセス問題

## 🚨 現状の問題 (Issue #3)

デプロイ先（https://hides-blog-static.pages.dev/blog/）で、URLエンコードされた日本語ファイル名を持つ記事にアクセスできない：

### 動作するURL
- `https://hides-blog-static.pages.dev/blog/2025/07/2409` ✅

### 動作しないURL  
- `https://hides-blog-static.pages.dev/blog/2025/08/%E4%B9%85%E3%80%85%E3%83%88%E3%83%AC%E3%83%93%E3%83%A5%E3%83%AC%E3%83%BC%E3%83%88%E3%80%82hides%E3%81%AEmma%E3%81%AF%E3%81%93%E3%81%93%E3%81%8B%E3%82%89%E5%A7%8B%E3%81%BE%E3%81%A3%E3%81%9F%E6%80%9D.html` ❌

## 🔍 問題の原因分析

### ✅ 問題の根本原因が判明
- **ファイルシステム**: ファイル名が`%E4%B9%85...`のようにURLエンコードされた文字列として保存
- **ブラウザの挙動**: URLパス内の`%E4%B9%85...`を自動的に日本語にデコードして送信
- **サーバーの挙動**: デコードされた日本語ファイル名を探すが、実際のファイル名はエンコード済みなので404エラー

### 実証結果
```bash
# 実際のファイル名: %E4%B9%85%E3%80%85%E3%83%88%E3%83%AC%E3%83%93%E3%83%A5%E3%83%AC%E3%83%BC%E3%83%88....html
# ブラウザが送信: 久々トレビュレート....html
# 結果: 404 Not Found
```

## 📋 選択した対応戦略

### ✅ 方針A: ファイル名を日本語（デコード）に戻す
URLエンコードされたファイル名（`%E4%B9%85...`）を日本語ファイル名（`久々...`）に変換する。

**理由**:
- 最もシンプルで確実な解決策
- URLとファイル名が一致するため、追加の設定不要
- Cloudflare Pagesでも問題なく動作する（UTF-8対応）

## 🛠 実装手順（調査フェーズ）

### ステップ1: 実際のファイル名を確認
```bash
# 問題のあるファイルが実際にどう保存されているか確認
ls -la simple_mirror/blog/2025/08/ | grep -i "久々"
```

### ステップ2: ローカルでの動作確認
```bash
# ローカルサーバーで同じURLパスでアクセス可能か確認
cd simple_mirror && python3 -m http.server 8000
# ブラウザで http://localhost:8000/blog/2025/08/[ファイル名] にアクセス
```

### ステップ3: 解決策の決定と実装
- 調査結果に基づいて最適な方針を選択

## ✅ 次のアクション

1. [ ] 実際のファイル名を確認（URLエンコードされているか）
2. [ ] ローカルサーバーで同じ問題が再現するか確認
3. [ ] 最適な修正方針を決定
4. [ ] 修正スクリプトを作成・実行
5. [ ] Cloudflare Pagesに再デプロイ
6. [ ] 動作確認

## 📊 現在の状態

- **ミラーサイト**: `simple_mirror/` 
- **問題のURL例**: `/blog/2025/08/久々トレビュレート.html` 形式のファイル
- **デプロイコマンド**: `npx wrangler pages deploy simple_mirror --project-name=hides-blog-static`
- **ローカルテスト**: `cd simple_mirror && python3 -m http.server 8000`